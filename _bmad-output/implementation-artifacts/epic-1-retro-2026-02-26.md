# Rétrospective Epic 1 — Socle technique et déploiement

**Date :** 2026-02-26  
**Epic :** 1 — Socle technique et déploiement  
**Statut :** terminée  

---

## 1. Résumé de l’epic

- **Stories livrées :** 5/5 (1-1 à 1-5).
- **Périmètre :** frontend Vite React TS (structure par domaine), API FastAPI (statics, health check), Docker Compose (RecyClique, Paheko, PostgreSQL, Redis), loader de modules (TOML, ModuleBase), place pour EventBus/workers et slots React, déploiement effectif et vérification de la stack.
- **FR couverts :** FR18, FR24, FR25.

---

## 2. Points forts

- **Ajout de la Story 1.5 en cours d’epic** : le démarrage et le contrôle de la stack Docker n’étaient pas explicites ; l’ajout d’une story dédiée a été jugé pertinent, surtout en développement automatisé (agents), pour éviter le flou sur « ça tourne / ça ne tourne pas ».
- **Socle livré** : structure front, API, Docker, versions figées (Python 3.12, Node 20 LTS), health check, base pour modules et slots.
- **Checklist v0.1** : les points « loader/slots », « convention tests », « versions » sont maintenant marqués comme traités ou tranchés dans `references/artefacts/2026-02-26_03_checklist-v0.1-architecture.md`.

---

## 3. Risques identifiés et mitigations

- **Risque :** points architecturaux encore perçus comme « à trancher » → risque de divergence entre agents (roue libre).
- **Cause :** les décisions existaient (checklist, architecture) mais n’étaient pas toutes marquées « fermées » ni systématiquement chargées par les agents.
- **Mitigation :**  
  - Mise à jour de la checklist v0.1 (trois points cochés, FR13b laissé reporté).  
  - Règle de contexte pour les agents : charger la checklist v0.1 + les sections Gap Analysis / Implementation Readiness de l’architecture pour toute story socle/modules/frontend.

---

## 4. Action items Epic 1

| # | Action | Responsable | Statut |
|---|--------|-------------|--------|
| 1 | Consolider la checklist v0.1 comme référence unique | Strophe / SM | Fait (checklist mise à jour) |
| 2 | Marquer « convention tests frontend » comme fermée | — | Fait (coche + ref frontend/README.md) |
| 3 | Figer versions Python et Node (Dockerfile + README) | — | Déjà fait (vérifié) |
| 4 | Loader modules et slots – statut après Story 1.4 | — | Structure vérifiée, checklist cochée |
| 5 | FR13b (module correspondance) | Product / Analyst | Reporté à l’Epic 3, rappel dans checklist |
| 6 | Règle de contexte pour agents Dev/SM | Strophe | Fait (règle Cursor `.cursor/rules/architecture-et-checklist-v01.mdc` créée) |

---

## 5. Préparation Epic 2

- **Epic 2 :** Authentification et contrôle d’accès (JWT, compte admin, PIN, mode caisse verrouillé, SSO phase ultérieure).
- **Dépendances à l’Epic 1 :** socle technique et déploiement livré ; pas de blocage identifié.
- **À faire avant / en début d’Epic 2 :** appliquer la règle de contexte (charger checklist v0.1 + architecture) pour éviter que les agents divergent.

---

## 6. Liste de tout ce qu’il y a à faire (handoff)

Ce qui suit est la **liste exhaustive** des tâches restantes après la rétrospective. Chaque ligne indique **qui** fait l’action, **où** (fichier / workflow / conversation), et **si une autre conversation ou un autre agent** est nécessaire.

### À faire par toi (Strophe) — sans autre agent

| # | Action | Où / Comment |
|---|--------|----------------|
| 1 | **Règle de contexte pour les agents** | Une règle Cursor a été créée : `.cursor/rules/architecture-et-checklist-v01.mdc`. Elle demande de charger la checklist v0.1 et les sections architecture (Gap, Readiness) quand on travaille sur `api/`, `frontend/`, ou les artifacts d’implementation. **Rien à faire de plus** sauf vérifier en ouvrant un fichier sous `api/` ou `frontend/` que la règle est bien proposée / appliquée. |
| 2 | **Vérifier la checklist v0.1** | Ouvrir `references/artefacts/2026-02-26_03_checklist-v0.1-architecture.md` : les 3 premiers points sont cochés, FR13b reste reporté. Rien d’autre à faire sur la checklist pour l’instant. |

### À faire avec un autre agent ou une autre conversation

| # | Action | Qui / Quel workflow | Comment l’appeler |
|---|--------|----------------------|-------------------|
| 3 | **Créer les stories de l’Epic 2** | Agent **SM (Scrum Master)** avec le workflow **create-story** (BMAD) | Dans une nouvelle conversation (ou commande Cursor) : invoquer l’agent SM et demander de créer la première story de l’Epic 2 (ex. 2-1 Authentification JWT). Référence : `_bmad-output/planning-artifacts/epics.md` section Epic 2. Une fois les stories créées, le sprint-status passera l’Epic 2 en « in-progress » au premier create-story. |
| 4 | **Trancher des décisions architecturales futures** (si besoin) | Agent **Architect (Winston)** ou **PM** | Si plus tard un point d’architecture doit être tranché (ex. détail FR13b, choix technique non couvert par la checklist), ouvrir une conversation avec l’agent Architect ou le PM, en fournissant en contexte : `_bmad-output/planning-artifacts/architecture.md`, `references/artefacts/2026-02-26_03_checklist-v0.1-architecture.md`, et la question précise. |
| 5 | **Exécuter une story (développement)** | Agent **Dev (Amelia)** ou **Quick Flow Solo Dev (Barry)** | Utiliser le workflow BMAD prévu pour l’exécution de story (story file dans implementation-artifacts ou référence par numéro). Donner en contexte l’epic, la story, et les fichiers de référence (checklist v0.1, architecture). |

### Déjà fait (aucune action requise)

- Checklist v0.1 : loader/slots, convention tests, versions Python/Node — cochés.
- FR13b : reporté à l’Epic 3, rappel dans la checklist.
- Rétrospective Epic 1 : document sauvegardé, sprint-status mis à jour (epic-1-retrospective: done).

---

## 7. Engagements et prochaines étapes

- **Rétrospective :** marquée comme faite dans `sprint-status.yaml` (epic-1-retrospective: done).
- **Prochaine étape :** exécuter les tâches restantes de la liste handoff, puis démarrer l’Epic 2 (création de stories avec l’agent SM, workflow `create-story`).

---

*Document généré dans le cadre du workflow BMAD rétrospective (Epic 1).*
